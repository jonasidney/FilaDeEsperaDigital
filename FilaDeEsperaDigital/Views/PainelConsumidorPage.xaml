<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="FilaEsperaDigital.Views.PainelConsumidorPage"
    BackgroundColor="#F5F5F5">

    <StackLayout Padding="20" Spacing="16">
        <!-- Barra de Título -->
        <Frame BackgroundColor="#1CBCF0" Padding="15" CornerRadius="10">
            <StackLayout Orientation="Horizontal">
                <Label Text="{Binding NomeConsumidor}" 
                       FontSize="18" 
                       FontAttributes="Bold" 
                       TextColor="White" 
                       HorizontalOptions="StartAndExpand"
                       VerticalOptions="Center"/>
                <!-- Avatar clicável -->
                <Frame BackgroundColor="White"
                       CornerRadius="20" 
                       WidthRequest="40" 
                       HeightRequest="40"
                       Padding="0">
                    <Label Text="{Binding Avatar}" 
                           FontSize="20" 
                           HorizontalOptions="Center"
                           VerticalOptions="Center">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding EditarPerfilCommand}"/>
                        </Label.GestureRecognizers>
                    </Label>
                </Frame>
            </StackLayout>
        </Frame>

        <!-- Card Estabelecimento -->
        <Frame BackgroundColor="White" Padding="16" CornerRadius="12" HasShadow="True">
            <StackLayout>
                <Label Text="{Binding InfoFila.NomeEstabelecimento}" 
                       FontSize="16" 
                       FontAttributes="Bold" 
                       TextColor="#333"/>
                <StackLayout Orientation="Horizontal" Spacing="15" Margin="0,5,0,0">
                    <StackLayout Orientation="Horizontal" Spacing="5">
                        <Label Text="👥" FontSize="14"/>
                        <Label Text="{Binding InfoFila.PessoasNaFila, StringFormat='{0:D2}'}" 
                               FontSize="14" 
                               TextColor="#1CBCF0" 
                               FontAttributes="Bold"/>
                    </StackLayout>
                    <StackLayout Orientation="Horizontal" Spacing="5">
                        <Label Text="🕐" FontSize="14"/>
                        <Label Text="{Binding InfoFila.TempoFormatado}" 
                               FontSize="14" 
                               TextColor="#1CBCF0"
                               FontAttributes="Bold"/>
                    </StackLayout>
                </StackLayout>
            </StackLayout>
        </Frame>

        <!-- Card Status fila -->
        <Frame BackgroundColor="White" Padding="16" CornerRadius="12" HasShadow="True">
            <StackLayout>
                <Label Text="Seu status na fila" 
                       FontSize="16" 
                       FontAttributes="Bold" 
                       TextColor="#1CBCF0"/>
                <StackLayout Padding="7" HorizontalOptions="Center">
                    <Frame BackgroundColor="#E0E0E0"
                           CornerRadius="40"
                           WidthRequest="80"
                           HeightRequest="80"
                           HorizontalOptions="Center"
                           Padding="0">
                        <Label Text="{Binding StatusFila.SuaPosicao, StringFormat='{0:D2}'}"
                               FontSize="28"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"/>
                    </Frame>
                    <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="8" Margin="0,8,0,0">
                        <Label Text="⏳" FontSize="16"/>
                        <Label Text="Tempo estimado:" FontSize="14" TextColor="#333"/>
                        <Label Text="{Binding StatusFila.TempoEstimadoFormatado}" FontSize="14" TextColor="#1CBCF0" FontAttributes="Bold"/>
                    </StackLayout>
                </StackLayout>
            </StackLayout>
        </Frame>

        <!-- Botão Sair da Fila -->
        <Button Text="Sair da Fila"
                BackgroundColor="#E53E3E"
                TextColor="White"
                FontSize="18"
                FontAttributes="Bold"
                CornerRadius="10"
                HeightRequest="50"
                Command="{Binding SairDaFilaCommand}"/>
    </StackLayout>
</ContentPage>
